# ==================================================
# Grille
# ==================================================

# A light reinterpretation of Mutable Instruments Grids

# Input 1:    Clock
# Input 2:    Reset
# Output 1:   Bassdrum trigger
# Output 2:   Snare trigger
# Output 3:   Hihat trigger
# Pot 1.1:    Bassdrum Activity
# Pot 1.2:    Snare Activity
# Pot 2.1:    Hihat Activity
# Button 1.1  Bassdrum mute
# Button 1.2: Bassdrum dice
# Button 2.1: Bassdrum 4 on the floor
# Button 1.4: Snare dice
# Button 1.6: HiHat dice

[p2b8]
[p2b8]





# --------------------------------------------------
# Bassdrum
# --------------------------------------------------

# Generate random triggers
[algoquencer]
    clock = I1
    reset = I2
    activity = P1.1
    reroll = B1.2
    trigger = _BDSEQ



# Activate four on the floor triggers
[togglebutton]
    button = B2.1
    led = L2.1

[clocktool]
    clock = I1
    output = _BDCLOCK
    divide = 4

[logic]
    input1 = L2.1
    input2 = _BDCLOCK
    and = _BDCLOCKENABLE



# Merge algoquencer and /4 triggers
[logic]
    input1 = _BDSEQ
    input2 = _BDCLOCKENABLE
    or =  _BD



# Mute button
[togglebutton]
    button = B1.1
    led = L1.1



# Check if bassdrum is muted
[logic]
    input1 =  _BD
    input2 = L1.1
    nor = O1





# --------------------------------------------------
# Snare
# --------------------------------------------------

# Generate random triggers
[algoquencer]
    clock = I1
    reset = I2
    activity = P1.2
    mutebutton = B1.3
    muteled = L1.3
    reroll = B1.4
    trigger = O2





# --------------------------------------------------
# Hihat
# --------------------------------------------------

# Generate random triggers
[algoquencer]
    clock = I1
    reset = I2
    activity = P2.1
    mutebutton = B1.5
    muteled = B1.5
    reroll = B1.6
    trigger = O3
